# 말대답 생존기 - LLM 기반 직장 상사 시뮬레이션 게임

## 소개
**말대답 생존기**는 LangChain과 Gradio를 활용해 만든 웹 기반 시뮬레이션 게임입니다. 
당신은 직장 상사에게 "혼나지 않는 선에서" 하고 싶은 말을 하는 후임 역할을 맡게 됩니다. 
대화에 따라 상사의 감정이 변화하며, 감정 스택이 한계를 넘으면 게임 오버가 됩니다.

이 프로젝트는 단순한 챗봇이 아닌, 감정 상태 기반으로 대사를 분기하고 상황에 맞는 반응을 구성하는 구조를 갖추고 있습니다.

---

## 상사 말투 및 상황 기반 대화 초기화

이 프로젝트는 사용자가 실제 겪은 직장 상사와의 갈등 상황을 기반으로, 보다 현실적인 대화를 구성할 수 있게 설계되었습니다.

- **상황 입력**: 대화가 시작되기 전, 사용자가 상사와 있었던 구체적인 상황을 자연어로 입력합니다.
- **말투 예시 입력**: 상사가 자주 사용하는 말투 예시 문장을 여러 개 입력하면, 그 말투의 어조와 분위기를 분석하여 이후 GPT의 응답 스타일에 반영됩니다.

Gradio 인터페이스를 통해 다음과 같이 구성됩니다:

```python
with gr.Row():
    user_input_situation = gr.Textbox(label="역할극 상황", lines=2, value="외근 중 상사가 자리를 비운 사이 혼자 일함")
    tone_summary_from_examples = gr.Textbox(label="상사 성격 요약", lines=2, value="명령조이며 책임을 전가하는 상사")
```

이 입력값들은 이후 역할극 프롬프트의 다음 부분에 자동으로 반영됩니다:

```python
SystemMessage(content=(
    "너는 아래 상황에서 유저와 역할극을 수행하는 직장 상사 역할을 맡았다.\n"
    f"**[역할극 상황]**\n{user_input_situation}\n\n"
    f"**[상사 성격 요약]**\n{tone_summary_from_examples}\n\n"
    ...
))
```

이러한 입력 기반 맞춤형 시뮬레이션 덕분에, 실제 상사와의 대화를 시뮬레이션하는 몰입감 있는 경험이 가능합니다.

---

## 시행착오와 개선 과정

### 1. 문제 상황: 상사의 답변이 무조건 부정적

직장상사와의 상황을 입력받아 그 상황을 바탕으로 대화를 시작할 수 있음.

직장상사가 실제로 사용하는 말을 입력해서 말투를 분석하고 그 말투를 사용하게 함.

처음엔 하나의 프롬프트로 상사의 역할을 설정했어요. 

```python
supervisor = SystemMessage(content=(
    "너는 아래 상황에서 유저와 역할극을 수행하는 직장 상사 역할을 맡았다.\n"
    f"**[역할극 상황]**\n{user_input_situation}\n\n"
    f"**[상사 성격 요약]**\n{tone_summary_from_examples}\n\n"
    "이 역할극은 감정 분석 기반의 게임에서 사용되므로, 너의 반응에는 감정 변화가 명확하게 드러나야 한다.\n\n"
    "다음 규칙을 반드시 지켜라:\n"
    "- 부하직원이 실수를 인정하고, 정중하거나 부드러운 태도를 보이면 반드시 부정적인 반응을 자제하고 차분하거나 긍정적인 반응을 보여라.\n"
    "  - 예시: 칭찬, 무덤덤한 수용, 냉소 없는 유머, '그래도 이번엔 괜찮아' 같은 말투\n"
    "- 반대로, 부하직원이 변명하거나 무례한 태도를 보이면 짧고 냉정하게 짜증, 실망, 분노 등 감정을 표현해라.\n"
    "- 욕설, 조롱, 인격적인 공격에는 감정을 드러내며 징계를 암시하거나 정색하는 태도를 보여라.\n"
    "- 감정은 누적되며, 같은 태도가 반복되면 점점 더 강한 어조로 반응해야 한다.\n"
    "- 대사는 현실적이어야 하며, 한숨, 말 끊기, 무표정, 비꼼 등으로 감정을 자연스럽게 드러내라.\n"
    "지금부터 역할극을 시작한다."
))
```

**하지만 문제는:**
- 유저가 아무리 정중한 말을 해도 상사는 계속 비꼬고 혼내기만 했습니다.
- GPT는 "직장 상사의 캐릭터"를 유지하려다 보니 부정적인 톤만 반복했죠.

### 2. 해결: 프롬프트 이원화 (긍정 / 부정)
... (생략 - 위에서 작성한 흐름과 이어짐)
